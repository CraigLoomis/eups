#!/bin/sh
#
# A master script to call the various eups programs.  Maybe one day they'll go away?
#
args=""
while [ X"$1" != X"" ]; do
    case $1 in
     -V|--version)
        $EUPS_DIR/bin/eups_declare --version
	exit 1;;
     -*)
        args="$args $1"
	shift;;
     *)
        break;;
    esac
done

if [ X"$1" = X"" ]; then
   cat >&2 <<EOF
Usage:
	eups [--help|--version] command [options]
Supported commands are:
	declare		Declare a product
	distrib		Install a product from a remote distribution,
			or create such a distribution 
	expandtable	Insert explicit version tags into a table file
	flavor		Return the current flavor
	list            List some or all products
	path            Print the current eups path
	pkg-config	Return the options associated with product
	undeclare	Undeclare a product
Use
	eups --help cmd
for help with command "cmd"
EOF
    exit 1
fi
#
# Do the work
#
cmd=$1; shift

case $cmd in
 declare|distrib|expandtable|flavor|pkg-config|undeclare)
    eval $EUPS_DIR/bin/eups_$cmd "$args $@";;
 list)
    source `$EUPS_DIR/bin/eups_setup $cmd $args "$@"`;;
 path)
    echo $EUPS_PATH | perl -pe 'print "\t"; s/:/\n\t/g';;
 setup|unsetup)
    if [ X"args" = X"" ]; then args=" "; fi
    echo "Please use the command \"${cmd}$args $@\" which modifies your environment";;
 *)
    echo "Unknown eups command \"$cmd\"" >&2;
    eups --help
esac
